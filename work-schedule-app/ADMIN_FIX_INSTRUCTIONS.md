# üîß –ü–æ–ø—Ä–∞–≤–∫–∞ –Ω–∞ Admin —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç—Ç–∞

## üêõ –ü—Ä–æ–±–ª–µ–º 1: RLS Policy –≥—Ä–µ—à–∫–∞

**–ì—Ä–µ—à–∫–∞:**
```
new row violates row-level security policy for table "employees"
```

**–ü—Ä–∏—á–∏–Ω–∞:** RLS –ø–æ–ª–∏—Ç–∏–∫–∏—Ç–µ –≤ Supabase –±–ª–æ–∫–∏—Ä–∞—Ç INSERT –æ–ø–µ—Ä–∞—Ü–∏–∏—Ç–µ.

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï: –ò–∑–ø—ä–ª–Ω–∏ SQL —Å–∫—Ä–∏–ø—Ç–∞

### –°—Ç—ä–ø–∫–∞ 1: –û—Ç–≤–æ—Ä–∏ Supabase Dashboard

1. –û—Ç–≤–æ—Ä–∏: https://supabase.com/dashboard
2. –í–ª–µ–∑ –≤ –ø—Ä–æ–µ–∫—Ç–∞ —Å–∏
3. –û—Ç–∏–¥–∏ –Ω–∞ **SQL Editor** (–ª—è–≤–æ—Ç–æ –º–µ–Ω—é)

### –°—Ç—ä–ø–∫–∞ 2: –ò–∑–ø—ä–ª–Ω–∏ SQL —Å–∫—Ä–∏–ø—Ç–∞

1. –ù–∞—Ç–∏—Å–Ω–∏ **New Query**
2. –û—Ç–≤–æ—Ä–∏ —Ñ–∞–π–ª–∞: **`ADMIN_RLS_FIX.sql`**
3. –ö–æ–ø–∏—Ä–∞–π **–¶–ï–õ–ò–Ø –ö–û–î**
4. –ü–æ—Å—Ç–∞–≤–∏ –≥–æ –≤ SQL Editor
5. –ù–∞—Ç–∏—Å–Ω–∏ **Run** (F5)

### –°—Ç—ä–ø–∫–∞ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞

–¢—Ä—è–±–≤–∞ –¥–∞ –≤–∏–¥–∏—à:
- ‚úÖ "Success" —Å—ä–æ–±—â–µ–Ω–∏–µ
- –ù—è–º–∞ —á–µ—Ä–≤–µ–Ω–∏ –≥—Ä–µ—à–∫–∏

---

## ‚úÖ –ü—Ä–æ–±–ª–µ–º 2: –ü—Ä–∞–∑–Ω–æ –ø–æ–ª–µ –∑–∞ –Ω–æ–º–µ—Ä –Ω–∞ –º—è—Å—Ç–æ

**–ü—Ä–µ–¥–∏:**
- ‚ùå –¢—Ä—è–±–≤–∞—à–µ –¥–∞ —Å–µ –≤—ä–≤–µ–¥–µ –Ω–æ–º–µ—Ä –Ω–∞ –º—è—Å—Ç–æ
- ‚ùå –ù—è–º–∞—à–µ –æ–ø—Ü–∏—è –∑–∞ —Å–ª—É–∂–∏—Ç–µ–ª–∏ –±–µ–∑ –æ—Ñ–∏—Å –º—è—Å—Ç–æ

**–°–ª–µ–¥:**
- ‚úÖ –ü–æ–ª–µ—Ç–æ "–ù–æ–º–µ—Ä –Ω–∞ –º—è—Å—Ç–æ" –µ **–æ–ø—Ü–∏–æ–Ω–∞–ª–Ω–æ**
- ‚úÖ –ú–æ–∂–µ –¥–∞ —Å–µ –æ—Å—Ç–∞–≤–∏ **–ø—Ä–∞–∑–Ω–æ**
- ‚úÖ –ü–æ–∫–∞–∑–≤–∞ "–ù—è–º–∞ –æ—Ñ–∏—Å –º—è—Å—Ç–æ" –≤ —Å–ø–∏—Å—ä–∫–∞
- ‚úÖ Placeholder: "–Ω–∞–ø—Ä. 348 –∏–ª–∏ –æ—Å—Ç–∞–≤–∏ –ø—Ä–∞–∑–Ω–æ"
- ‚úÖ Helper —Ç–µ–∫—Å—Ç: "–û—Å—Ç–∞–≤–µ—Ç–µ –ø—Ä–∞–∑–Ω–æ –∞–∫–æ –Ω—è–º–∞ –æ—Ñ–∏—Å –º—è—Å—Ç–æ"

---

## üìä –ö–∞–∫ —Ä–∞–±–æ—Ç–∏ —Å–µ–≥–∞

### –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ —Å–ª—É–∂–∏—Ç–µ–ª –° –º—è—Å—Ç–æ:
```
–ò–º–µ: –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤
–ú—è—Å—Ç–æ: 348
–ì—Ä—É–ø–∞: 1
‚Üí –†–µ–∑—É–ª—Ç–∞—Ç: "–ú—è—Å—Ç–æ 348 ‚Ä¢ –ì—Ä—É–ø–∞ 1"
```

### –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ —Å–ª—É–∂–∏—Ç–µ–ª –ë–ï–ó –º—è—Å—Ç–æ:
```
–ò–º–µ: –ú–∞—Ä–∏—è –ì–µ–æ—Ä–≥–∏–µ–≤–∞
–ú—è—Å—Ç–æ: (–ø—Ä–∞–∑–Ω–æ)
–ì—Ä—É–ø–∞: (–Ω—è–º–∞ –∑–Ω–∞—á–µ–Ω–∏–µ)
‚Üí –†–µ–∑—É–ª—Ç–∞—Ç: "–ù—è–º–∞ –æ—Ñ–∏—Å –º—è—Å—Ç–æ"
```

---

## üéØ SQL –ü—Ä–æ–º–µ–Ω–∏

### –ù–æ–≤–∏ RLS –ø–æ–ª–∏—Ç–∏–∫–∏:

1. **INSERT Policy:**
```sql
CREATE POLICY "–í—Å–∏—á–∫–∏ –º–æ–≥–∞—Ç –¥–∞ —Å—ä–∑–¥–∞–≤–∞—Ç —Å–ª—É–∂–∏—Ç–µ–ª–∏"
    ON employees FOR INSERT
    WITH CHECK (true);
```

2. **UPDATE Policy:**
```sql
CREATE POLICY "–í—Å–∏—á–∫–∏ –º–æ–≥–∞—Ç –¥–∞ –æ–±–Ω–æ–≤—è–≤–∞—Ç —Å–ª—É–∂–∏—Ç–µ–ª–∏"
    ON employees FOR UPDATE
    USING (true)
    WITH CHECK (true);
```

---

## üß™ –¢–µ—Å—Ç–≤–∞–Ω–µ

### –¢–µ—Å—Ç 1: –î–æ–±–∞–≤—è–Ω–µ —Å—ä—Å –º—è—Å—Ç–æ
```
1. Admin ‚Üí –î–æ–±–∞–≤–∏ —Å–ª—É–∂–∏—Ç–µ–ª
2. –ò–º–µ: "–¢–µ—Å—Ç –°–ª—É–∂–∏—Ç–µ–ª"
3. –ú—è—Å—Ç–æ: "999"
4. –ì—Ä—É–ø–∞: 1
5. –î–æ–±–∞–≤–∏
6. ‚úÖ –£—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–µ–Ω!
```

### –¢–µ—Å—Ç 2: –î–æ–±–∞–≤—è–Ω–µ –±–µ–∑ –º—è—Å—Ç–æ
```
1. Admin ‚Üí –î–æ–±–∞–≤–∏ —Å–ª—É–∂–∏—Ç–µ–ª
2. –ò–º–µ: "–¢–µ—Å—Ç –ë–µ–∑ –ú—è—Å—Ç–æ"
3. –ú—è—Å—Ç–æ: (–ø—Ä–∞–∑–Ω–æ)
4. –î–æ–±–∞–≤–∏
5. ‚úÖ –£—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–µ–Ω!
6. –í —Å–ø–∏—Å—ä–∫–∞: "–ù—è–º–∞ –æ—Ñ–∏—Å –º—è—Å—Ç–æ"
```

---

## üì± UI –ü—Ä–æ–º–µ–Ω–∏

### –ü—Ä–µ–¥–∏:
```
–ù–æ–º–µ—Ä –Ω–∞ –º—è—Å—Ç–æ
[–Ω–∞–ø—Ä. 348]
```

### –°–ª–µ–¥:
```
–ù–æ–º–µ—Ä –Ω–∞ –º—è—Å—Ç–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª–Ω–æ)
[–Ω–∞–ø—Ä. 348 –∏–ª–∏ –æ—Å—Ç–∞–≤–∏ –ø—Ä–∞–∑–Ω–æ]
–û—Å—Ç–∞–≤–µ—Ç–µ –ø—Ä–∞–∑–Ω–æ –∞–∫–æ –Ω—è–º–∞ –æ—Ñ–∏—Å –º—è—Å—Ç–æ
```

---

## üîí Security

### –ó–∞–±–µ–ª–µ–∂–∫–∞:
- –ó–∞ —Å–µ–≥–∞ RLS –ø–æ–ª–∏—Ç–∏–∫–∏—Ç–µ –ø–æ–∑–≤–æ–ª—è–≤–∞—Ç –Ω–∞ –≤—Å–∏—á–∫–∏ –¥–∞ –¥–æ–±–∞–≤—è—Ç/–æ–±–Ω–æ–≤—è–≤–∞—Ç
- –ó–∞ production –ø—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–Ω–æ –µ –¥–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞ Supabase Auth —Å custom claims
- –ò–ª–∏ –¥–∞ —Å–µ –¥–æ–±–∞–≤–∏ `role` –∫–æ–ª–æ–Ω–∞ –≤ `employees` —Ç–∞–±–ª–∏—Ü–∞—Ç–∞

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–°–ª–µ–¥ –∫–∞—Ç–æ –∏–∑–ø—ä–ª–Ω–∏—à SQL —Å–∫—Ä–∏–ø—Ç–∞:
1. ‚úÖ Admin –º–æ–∂–µ –¥–∞ –¥–æ–±–∞–≤—è —Å–ª—É–∂–∏—Ç–µ–ª–∏
2. ‚úÖ –ú–æ–∂–µ –¥–∞ –æ—Å—Ç–∞–≤–∏ –º—è—Å—Ç–æ—Ç–æ –ø—Ä–∞–∑–Ω–æ
3. ‚úÖ –ü–æ–∫–∞–∑–≤–∞ "–ù—è–º–∞ –æ—Ñ–∏—Å –º—è—Å—Ç–æ" –∑–∞ —Å–ª—É–∂–∏—Ç–µ–ª–∏ –±–µ–∑ –º—è—Å—Ç–æ
4. ‚úÖ –ù—è–º–∞ RLS –≥—Ä–µ—à–∫–∏

---

**Refresh –±—Ä–∞—É–∑—ä—Ä–∞ (F5) –∏ —Ç–µ—Å—Ç–≤–∞–π!** üöÄ

